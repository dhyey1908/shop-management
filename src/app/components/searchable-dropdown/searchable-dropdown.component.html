<div class="dropdown-container">
    <label *ngIf="label" class="form-label">{{ label }}</label>

    <div class="dropdown-wrapper">
        <div class="search-input-wrapper">
            <input type="text" class="form-control" [placeholder]="placeholder" [(ngModel)]="searchTerm"
                (input)="onSearchChange()" (focus)="onInputFocus()" (blur)="onInputBlur()" autocomplete="off"
                appGujaratiInput />
            <button *ngIf="selectedValue" type="button" class="clear-btn" (click)="clearSelection()" tabindex="-1">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2"
                    stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                </svg>
            </button>
            <button type="button" class="dropdown-btn" (click)="toggleDropdown()" tabindex="-1">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2"
                    stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 8.25l-7.5 7.5-7.5-7.5" />
                </svg>
            </button>
        </div>

        <div *ngIf="isOpen && filteredOptions.length > 0" class="dropdown-menu">
            <div *ngFor="let option of filteredOptions" class="dropdown-item" (mousedown)="selectOption(option)"
                [class.selected]="option.value === selectedValue">
                <div class="option-label">{{ option.label }}</div>
                <div *ngIf="option.subtitle" class="option-subtitle">{{ option.subtitle }}</div>
            </div>
        </div>

        <div *ngIf="isOpen && filteredOptions.length === 0" class="dropdown-menu">
            <div class="dropdown-item no-results">
                No results found
            </div>
        </div>
    </div>
</div>